---
# Global variables for local HA cluster (K3s or RKE2)

# Cluster Type: k3s or rke2
cluster_type: "rke2"

# HAProxy IP - Dedicated load balancer for the cluster
haproxy_ip: "192.168.105.96"

# K3s configuration
k3s_version: "latest"
k3s_api_port: 6443
k3s_config_dir: "/etc/rancher/k3s"
k3s_data_dir: "/var/lib/rancher/k3s"

# RKE2 configuration
rke2_version: "latest"
rke2_api_port: 6443
rke2_config_dir: "/etc/rancher/rke2"
rke2_data_dir: "/var/lib/rancher/rke2"
rke2_cni: "cilium"  # Options: cilium, calico, canal

# Master nodes IPs for TLS SAN (includes HAProxy IP)
master_ips:
  - "192.168.105.93"
  - "192.168.105.94"
  - "192.168.105.95"
  - "192.168.105.96"

# Local domain (fictitious)
domain: "rke2.dev"
cluster_name: "rke2.dev"

# MetalLB configuration (local LoadBalancer)
metallb_version: "v0.15.2"
metallb_ip_range: "192.168.105.200-192.168.105.250"
traefik_loadbalancer_ip: "192.168.105.200"

# Traefik configuration
traefik_namespace: "traefik"
traefik_chart_version: "latest"
traefik_http_nodeport: 32080
traefik_https_nodeport: 32443

# cert-manager configuration (self-signed certificates)
cert_manager_version: "v1.16.2"
# We do NOT use Let's Encrypt for local domains
# We will use self-signed certificates
use_self_signed_certs: true

# Custom CoreDNS to resolve *.k3cluster.local
# Will point to HAProxy for load balancing
coredns_custom_domain: "{{ domain }}"
coredns_custom_ip: "{{ haproxy_ip }}"

# Kubeconfig local path (dynamically set based on domain)
local_kubeconfig_path: "~/.kube/{{ domain }}-config.yml"

# HAProxy configuration
haproxy_stats_port: 8404
haproxy_stats_user: "admin"
haproxy_stats_password: "admin"  # CHANGE to a secure password

# Prometheus + Grafana monitoring configuration
prometheus_version: "latest"
grafana_admin_password: "admin"  # CHANGE to a secure password
prometheus_retention_days: 7
prometheus_storage_size: "10Gi"
grafana_storage_size: "5Gi"
alertmanager_storage_size: "2Gi"
